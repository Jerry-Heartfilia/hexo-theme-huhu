<!DOCTYPE html>
<html>
  <head>
    <% if (theme.gtm_id) { %>
    <!-- Google Tag Manager -->
    <script>
      ;(function(w, d, s, l, i) {
        w[l] = w[l] || []
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' })
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer' ? '&l=' + l : ''
        j.async = true
        j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl
        f.parentNode.insertBefore(j, f)
      })(window, document, 'script', 'dataLayer', '<%= theme.gtm_id %>')
    </script>
    <!-- End Google Tag Manager -->
    <% } %>
    <meta charset="utf-8" />
    <meta name="baidu-site-verification" content="vvVgSQUzPU" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="keywords" content="<%= config.keywords%>" />
    <% if (theme.google_site_verification) { %>
    <meta name="google-site-verification" content="<%= theme.google_site_verification %>" />
    <% } %>
    <meta name="description" content="<%= config.description%>" />
    <title><%= config.title %> - <%= config.subtitle %></title>
    <link rel="shortcut icon" href="<%= theme.favicon%>" type="image/x-icon" />
    <%- css('style/style') %>
  </head>
  <body>
    <div class="head">
      <% for (var i in theme.menu){ %>
      <a
        href="<%- url_for(theme.menu[i]) %>"
        class="<%= is_current(theme.menu[i]) ? 'current' : '' %>"
      >
        <%= __(i) %>
      </a>
      <% } %>
    </div>
    <div id="container">
      <div id="main">
        <div class="navbar">
          <div class="toggle">
            <svg class="icon toggle-icon" aria-hidden="true">
              <use xlink:href="#icon-align-left"></use>
            </svg>
          </div>
          <div class="search">
            <div class="input-warp">
              <svg class="icon" aria-hidden="true">
                <use xlink:href="#icon-search"></use>
              </svg>
              <input type="text" name="" id="" placeholder="Search Keys" />
            </div>
          </div>
        </div>
        <div class="content">
          <%- body %>
        </div>
        <footer>
          <div class="copyright">
            ©2019 <%= config.author %>. Powered by Hexo &
            <a href="https://github.com/shixiaohu2206/hexo-theme-huhu">hexo-theme-huhu</a>
          </div>
          <% if (theme.site_icp) { %>
          <div class="icp">
            <%= theme.site_icp %>
          </div>
          <% } %>
        </footer>
      </div>
      <div id="card-wrap">
        <div class="card">
          <div class="logo-widget">
            <div class="author">
              Utone
            </div>
            <div class="logo" style="background-image: url('/images/logo.jpeg')"></div>
          </div>
          <div class="locate-widget">
            <div class="city-wrap">
              <svg class="icon location" aria-hidden="true">
                <use xlink:href="#icon-location"></use>
              </svg>
              <span id="city-name"></span>
            </div>
            <div class="weather-wrap">
              <div id="weather-img">
                <svg class="icon weather" aria-hidden="true">
                  <use xlink:href="#icon-qingjiafeng"></use>
                </svg>
              </div>
              <div id="weather-detail"></div>
            </div>
          </div>
          <div class="follow-widget">
            <% for (var f in theme.follow){ %>
            <a href="<%= theme.follow[f] %>" target="_block">
              <svg class="icon font" aria-hidden="true">
                <use xlink:href="#icon-<%= f %>"></use>
              </svg>
            </a>
            <% } %> <% if (theme.rss) { %>
            <a href="<%= theme.rss %>" target="_block">
              <svg class="icon font" aria-hidden="true">
                <use xlink:href="#icon-rss"></use>
              </svg>
            </a>
            <% } %>
          </div>
          <% if (is_post()) { %> <% if (toc(page.content, {list_number: false})) { %>
          <div class="toc-widget">
            <div class="title">
              <span>Toc</span>
            </div>
            <div class="post-toc">
              <%- toc(page.content, {list_number: false}) %>
            </div>
          </div>
          <% } %> <% } %>
          <div class="category-widget">
            <div class="title">
              <span>Categories</span>
              <span><a href="/archives">···</a></span>
            </div>
            <div class="list">
              <ul>
                <% site.categories.each(function (c, k) { %> <% if ( k < theme.categories_max) { %>
                <li>
                  <a href="<%- url_for(c.path) %>">
                    <%= c.name %>
                  </a>
                </li>
                <% } %> <% }) %>
              </ul>
            </div>
          </div>
          <div class="tag-widget">
            <div class="title">
              <span>Tag Cloud</span>
              <span><a href="">···</a></span>
            </div>
            <div class="tag-cloud">
              <%- tagcloud({ min_font: 13, max_font: 20, amount: 15, color: true, start_color:
              '#4a4a4a', end_color: '#4a4a4a'}) %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
  <% if (theme.gtm_id) { %>
  <!-- Google Tag Manager (noscript) -->
  <noscript
    ><iframe
      src="https://www.googletagmanager.com/ns.html?id=<%= theme.gtm_id %>"
      height="0"
      width="0"
      style="display:none;visibility:hidden"
    ></iframe
  ></noscript>
  <!-- End Google Tag Manager (noscript) -->
  <% } %>
</html>
<script type="text/javascript">
  window.THEME_CONFIG = JSON.parse('<%- JSON.stringify(theme) %>')
  window.loadJs = function(d, m, a) {
    var c = document.getElementsByTagName('head')[0] || document.head || document.documentElement
    var b = document.createElement('script')
    b.defer = true
    b.setAttribute('type', 'text/javascript')
    b.setAttribute('charset', 'UTF-8')
    b.setAttribute('async', 'true')
    b.setAttribute('src', d)
    m && b.setAttribute('data-main', '<%- url_for("/scripts/app") %>')
    if (typeof a === 'function') {
      if (window.attachEvent) {
        b.onreadystatechange = function() {
          var e = b.readyState
          if (e === 'loaded' || e === 'complete') {
            b.onreadystatechange = null
            a()
          }
        }
      } else {
        b.onload = a
      }
    }
    c.appendChild(b)
  }
  loadJs('https://cdn.bootcss.com/require.js/2.3.6/require.min.js', true, function() {
    require.config({
      paths: {
        // site
        share: 'share',
        iconfont: 'iconfont',
        hodgepodge: 'hodgepodge',
        valine: ['cdn/Valine.min'],

        // cdn
        av: ['<%- theme.cdn_module.av_min %>', 'cdn/av-min'],
        jquery: ['<%- theme.cdn_module.jquery %>', 'cdn/jquery.min'],
        busuanzi: ['<%- theme.cdn_module.busuanzi %>', 'cdn/busuanzi.pure.mini'],
        confirm: ['<%- theme.cdn_module.confirm %>', 'cdn/jquery.confirm.min'],
        fancybox: ['<%- theme.cdn_module.fancybox %>', 'cdn/jquery.fancybox.min']
      },

      map: {
        '*': {
          // css: '/scripts/cdn/css-min.js'
          css: 'https://cdn.bootcss.com/require-css/0.1.10/css.min.js'
        }
      },

      shim: {
        fancybox: {
          // deps: ['css!../style/fancybox']
          deps: ['css!https://cdn.bootcss.com/fancybox/3.5.7/jquery.fancybox.min.css']
        },
        confirm: {
          // deps: ['css!../style/confirm']
          deps: ['css!https://cdn.bootcss.com/jquery-confirm/3.3.4/jquery-confirm.min.css']
        }
      },

      // 加载超时
      waitSeconds: 3
    })
  })
</script>
<% if (theme.baidu_push) { %>
<script>
  ;(function() {
    var bp = document.createElement('script')
    var curProtocol = window.location.protocol.split(':')[0]
    if (curProtocol === 'https') {
      bp.src = 'https://zz.bdstatic.com/linksubmit/push.js'
    } else {
      bp.src = 'http://push.zhanzhang.baidu.com/push.js'
    }
    var s = document.getElementsByTagName('script')[0]
    s.parentNode.insertBefore(bp, s)
  })()
</script>
<% } %>
